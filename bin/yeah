#!/usr/bin/env ruby

command = ARGV.shift

case command

when 'new'
  require 'fileutils'

  name = ARGV.shift || 'game'

  unless Dir[name].any?
    template_path = File.expand_path('../../lib/yeah/_template', __FILE__)
    project_path = "./#{name}"

    FileUtils.cp_r(template_path, project_path)

    puts "Created new game project at `#{name}`."
  else
    puts "Error: `#{name}` directory already exists."
  end

when 'build'
  require 'yeah/web/builder'
  Yeah::Web::Builder.new.build

when 'serve'
  require 'yeah/web/server'
  Yeah::Web::Server.new.serve

when 'version'
  require 'yeah/version'
  puts Yeah::VERSION

else
  puts "Usage: yeah <command>"
  puts ""
  puts "Commands:"
  puts "  new [name] - create a new game project"
  puts "  build - build package for a game"
  puts "  serve - serve a game over the Internet"
  puts "  version - print installed version"
end
