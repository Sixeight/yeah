#!/usr/bin/env ruby

require 'fileutils'

options = {}

options[:command] = ARGV.shift

case options[:command]
when 'new'
  directory = ARGV.shift || 'game'

  unless Dir[directory].any?
    template_path = File.expand_path('../../lib/yeah/_template', __FILE__)
    FileUtils.cp_r(template_path, "./#{directory}")
    puts "Created new game project at `#{directory}`."
  else
    puts "Error: `#{directory}` directory already exists."
  end
when 'build'
  require 'yeah/web/builder'
  Yeah::Web::Builder.new.build
when 'serve'
  require 'yeah/web/server'
  Yeah::Web::Server.new.serve
when 'version'
  require 'yeah/version'
  puts Yeah::VERSION
else
  puts "Usage: yeah <command>"
  puts ""
  puts "Commands:"
  puts "  new [name] - create a new game project"
  puts "  build - build package for a game"
  puts "  serve - serve a game over the Internet"
  puts "  version - print installed version"
end
